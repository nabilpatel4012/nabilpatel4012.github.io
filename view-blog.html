<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog Post - Nabil Patel</title>
    <link rel="icon" href="assets/favicon.svg" type="image/svg+xml" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/highlightjs-themes@1.0.0/vs.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poor+Story&display=swap"
      rel="stylesheet"
    />
    <style>
      html {
        cursor: url("assets/pointer.svg"), auto;
        font-family: "Poor Story", system-ui;
        scroll-behavior: smooth;
        transition: filter 0.3s ease;
      }

      html.dark-mode {
        filter: invert(1) hue-rotate(180deg);
        cursor: url("assets/pointer-light.svg"), auto;
      }

      html.dark-mode img {
        filter: invert(1) hue-rotate(180deg);
      }

      html.dark-mode .home-section img,
      html.dark-mode nav a,
      html.dark-mode .theme-toggle,
      html.dark-mode .hamburger-menu img,
      html.dark-mode .mobile-theme-toggle,
      html.dark-mode .mobile-nav a,
      html.dark-mode .mobile-nav-close,
      html.dark-mode .back-btn,
      html.dark-mode img {
        cursor: url("assets/cursor-light.svg"), auto;
      }

      ::selection {
        background-color: #000000;
        color: #ffffff;
      }

      body {
        scrollbar-width: none;
        -ms-overflow-style: none;
        margin: 0;
        padding: 0;
        background-color: #fefefe;
        min-height: 100vh;
        line-height: 1.6;
      }

      ::-webkit-scrollbar {
        display: none;
      }

      nav {
        z-index: 1000;
        margin: 15px 10px;
        position: sticky;
        top: 15px;
        border: 4px solid black;
        border-top-left-radius: 37px 140px;
        border-top-right-radius: 23px 130px;
        border-bottom-left-radius: 20px 109px;
        border-bottom-right-radius: 100px 44px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        padding: 0px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: #fefefe;
      }

      .nav-left {
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .nav-center {
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .home-section {
        display: flex;
        justify-content: start;
        align-items: center;
      }

      .home-section img {
        cursor: url("assets/cursor.svg"), auto;
      }

      nav a {
        cursor: url("assets/cursor.svg"), auto;
        display: flex;
        align-items: center;
        text-decoration: none;
        color: black;
        font-size: 1.2em;
        font-weight: bold;
        padding: 10px;
        transition: color 0.3s ease;
        white-space: nowrap;
      }

      nav a:hover {
        color: #666;
      }

      .theme-toggle {
        margin-right: 10px;
        cursor: url("assets/cursor.svg"), auto;
        background: none;
        border: 2px solid black;
        border-radius: 87% 13% 81% 19% / 10% 72% 28% 90%;
        padding: 8px 12px;
        font-family: "Poor Story", system-ui;
        font-size: 1em;
        font-weight: bold;
        color: black;
        transition: all 0.3s ease;
        white-space: nowrap;
      }

      .theme-toggle:hover {
        background-color: #f0f0f0;
        transform: scale(1.05);
      }

      .hamburger-menu {
        z-index: 1000;
        margin: 0 10px;
        position: sticky;
        top: 0;
        height: 40px;
        display: none;
        width: calc(100% - 20px);
        padding: 10px;
        background-color: #fefefe;
        box-sizing: border-box;
        justify-content: space-between;
        align-items: center;
      }

      .hamburger-menu img {
        cursor: url("assets/cursor.svg"), auto;
        width: 30px;
        height: 30px;
      }

      .mobile-theme-toggle {
        cursor: url("assets/cursor.svg"), auto;
        background: none;
        border: 2px solid black;
        border-radius: 87% 13% 81% 19% / 10% 72% 28% 90%;
        padding: 6px 10px;
        font-family: "Poor Story", system-ui;
        font-size: 0.9em;
        font-weight: bold;
        color: black;
        transition: all 0.3s ease;
      }

      .mobile-nav {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 0.99);
        z-index: 2000;
        justify-content: center;
        align-items: center;
      }

      .mobile-nav.active {
        display: flex;
      }

      .mobile-nav-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 30px;
      }

      .mobile-nav a {
        color: rgb(0, 0, 0);
        text-decoration: none;
        font-size: 1.5em;
        font-weight: bold;
        cursor: url("assets/cursor.svg"), auto;
        padding: 10px 20px;
        border: 3px solid black;
        border-radius: 87% 13% 81% 19% / 10% 72% 28% 90%;
        transition: all 0.3s ease;
      }

      .mobile-nav a:hover {
        background-color: white;
        color: black;
      }

      .mobile-nav-close {
        position: absolute;
        top: 20px;
        right: 20px;
        color: white;
        font-size: 2em;
        cursor: url("assets/cursor.svg"), auto;
        background: none;
        border: none;
        padding: 10px;
      }

      .main-content {
        padding: 50px 20px;
        max-width: 800px;
        margin: 0 auto;
      }

      .back-btn {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 12px 24px;
        border: 4px solid black;
        background: transparent;
        color: black;
        text-decoration: none;
        font-size: 16px;
        font-weight: bold;
        cursor: url("assets/cursor.svg"), auto;
        transition: all 0.3s ease;
        border-radius: 87% 13% 81% 19% / 10% 72% 28% 90%;
        margin-bottom: 40px;
        font-family: "Poor Story", system-ui;
      }

      .back-btn:hover {
        background: #f0f0f0;
        transform: scale(1.05);
      }

      .blog-header {
        text-align: center;
        margin-bottom: 40px;
      }

      .blog-cover {
        width: 100%;
        max-height: 400px;
        object-fit: cover;
        border-radius: 15px;
        margin-bottom: 30px;
        border: 4px solid black;
        border-top-left-radius: 37px 140px;
        border-top-right-radius: 23px 130px;
        border-bottom-left-radius: 10px 19px;
        border-bottom-right-radius: 120px 24px;
      }

      .blog-title {
        font-size: 2.5em;
        color: #333;
        margin-bottom: 20px;
        line-height: 1.2;
      }

      .blog-meta {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 30px;
        margin-bottom: 20px;
        font-size: 1.1em;
        color: #666;
        flex-wrap: wrap;
      }

      .blog-author {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .author-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 2px solid black;
      }

      .blog-tags {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 40px;
      }

      .tag {
        background-color: #333;
        color: white;
        padding: 6px 12px;
        border: 2px solid white;
        border-radius: 87% 13% 100% 0% / 21% 72% 28% 79%;
        font-size: 0.9em;
      }

      .blog-content {
        font-size: 1.3em;
        line-height: 1.8;
        color: #333;
        max-width: 100%;
        word-wrap: break-word;
      }

      .blog-content h1,
      .blog-content h2,
      .blog-content h3,
      .blog-content h4,
      .blog-content h5,
      .blog-content h6 {
        margin-top: 40px;
        margin-bottom: 20px;
        color: #222;
      }

      .blog-content h2 {
        font-size: 1.8em;
        border-bottom: 3px solid #333;
        padding-bottom: 10px;
      }

      .blog-content h3 {
        font-size: 1.5em;
      }

      .blog-content p {
        margin-bottom: 20px;
      }

      .blog-content ul,
      .blog-content ol {
        margin: 20px 0;
        padding-left: 30px;
      }

      .blog-content li {
        margin-bottom: 10px;
      }

      .blog-content blockquote {
        border-left: 4px solid #333;
        margin: 30px 0;
        padding: 20px;
        background-color: #f9f9f9;
        font-style: italic;
        border-radius: 0 15px 15px 0;
      }

      .blog-content code {
        background-color: #f4f4f4;
        padding: 2px 6px;
        border-radius: 4px;
        font-family: "Courier New", monospace;
        border: 1px solid #ddd;
      }

      .blog-content pre {
        background-color: #f4f4f4;
        padding: 20px;
        border-radius: 10px;
        overflow-x: auto;
        margin: 20px 0;
        border: 2px solid #ddd;
      }

      .blog-content pre code {
        background: none;
        padding: 0;
        border: none;
      }

      .blog-content a {
        color: #0066cc;
        text-decoration: underline;
      }

      .blog-content a:hover {
        color: #004499;
      }

      .blog-content hr {
        border: none;
        height: 3px;
        background-color: #333;
        margin: 40px 0;
        border-radius: 2px;
      }

      .loading {
        text-align: center;
        font-size: 1.5em;
        color: #666;
        margin: 50px 0;
      }

      .error {
        text-align: center;
        font-size: 1.3em;
        color: #d32f2f;
        margin: 50px 0;
        padding: 20px;
        border: 3px solid #d32f2f;
        border-radius: 87% 13% 81% 19% / 10% 72% 28% 90%;
        background-color: #ffebee;
      }

      .blog-footer {
        margin-top: 30px;
        padding: 10px;
        text-align: center;
      }

      .external-link {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 12px 24px;
        border: 4px solid #2563eb;
        background: transparent;
        color: #2563eb;
        text-decoration: none;
        font-size: 16px;
        font-weight: bold;
        cursor: url("assets/cursor.svg"), auto;
        transition: all 0.3s ease;
        border-radius: 87% 13% 81% 19% / 10% 72% 28% 90%;
        margin: 20px 10px;
        font-family: "Poor Story", system-ui;
      }

      .external-link:hover {
        background: #2563eb;
        color: white;
        transform: scale(1.05);
      }

      img {
        cursor: url("assets/cursor.svg"), auto;
      }

      @media (max-width: 1100px) {
        .nav-center {
          gap: 10px;
        }
        nav a {
          font-size: 1em;
          padding: 8px;
        }
        .theme-toggle {
          font-size: 0.9em;
          padding: 6px 10px;
        }
      }

      @media (max-width: 880px) {
        .blog-meta {
          flex-direction: column;
          gap: 15px;
        }
      }

      @media (max-width: 550px) {
        nav {
          display: none;
        }
        .hamburger-menu {
          display: flex;
        }
        .blog-title {
          font-size: 1.8em;
        }
        .blog-content {
          font-size: 1.1em;
        }
        .main-content {
          padding: 30px 15px;
        }
      }
    </style>
  </head>
  <body>
    <nav>
      <div class="nav-left">
        <div class="home-section">
          <a href="index.html">
            <img id="homeIcon" src="assets/favicon.svg" alt="home" />
          </a>
        </div>
      </div>
      <div class="nav-center">
        <a href="index.html#home">Home</a>
        <a href="index.html#about">About</a>
        <a href="index.html#experience">Experience</a>
        <a href="index.html#projects">Projects</a>
        <a href="index.html#skills">Skills</a>
        <a href="index.html#education">Education</a>
        <div
          style="
            display: flex;
            flex-direction: column;
            justify-content: center;
            margin-bottom: -10px !important;
          "
        >
          <a
            style="display: flex; padding-bottom: 0 !important; color: #666"
            href="blogs.html"
            >Blogs</a
          >
          <div style="display: flex; justify-content: center; align-items: top">
            <img
              id="curvedLineImage"
              src="assets/curved-underline.svg"
              height="20"
              width="30"
            />
          </div>
        </div>
        <a href="index.html#contact">Contact</a>
      </div>
      <button class="theme-toggle" onclick="toggleTheme()">
        dark mode (why not?)
      </button>
    </nav>

    <div class="hamburger-menu">
      <button class="mobile-theme-toggle" onclick="toggleTheme()">
        dark mode (why not?)
      </button>
      <img
        id="hamburgerImage"
        src="assets/hamburger.svg"
        alt="menu"
        onclick="toggleMobileNav()"
      />
    </div>

    <!-- Mobile Navigation Overlay -->
    <div class="mobile-nav" id="mobileNav">
      <button class="mobile-nav-close" onclick="toggleMobileNav()">
        <img id="closeImage" src="assets/cross.svg" alt="close" />
      </button>
      <div class="mobile-nav-content">
        <a href="index.html#home" onclick="toggleMobileNav()">Home</a>
        <a href="index.html#about" onclick="toggleMobileNav()">About</a>
        <a href="index.html#experience" onclick="toggleMobileNav()"
          >Experience</a
        >
        <a href="index.html#projects" onclick="toggleMobileNav()">Projects</a>
        <a href="index.html#skills" onclick="toggleMobileNav()">Skills</a>
        <a href="index.html#education" onclick="toggleMobileNav()">Education</a>
        <a href="blogs.html" onclick="toggleMobileNav()">Blogs</a>
        <a href="index.html#contact" onclick="toggleMobileNav()">Contact</a>
      </div>
    </div>

    <div class="main-content">
      <div id="loading" class="loading">Loading blog post...</div>
      <div id="error" class="error" style="display: none"></div>

      <div id="blogContent" style="display: none">
        <article class="blog-header">
          <img id="blogCover" class="blog-cover" alt="Blog cover" />
          <h1 id="blogTitle" class="blog-title"></h1>
          <div class="blog-meta">
            <div class="blog-author">
              <img id="authorAvatar" class="author-avatar" alt="Author" />
              <span id="authorName"></span>
            </div>
            <span id="blogDate"></span>
            <div style="display: flex; align-items: center">
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 3px;
                  margin-right: 10px;
                "
              >
                <img
                  id="reactionIcon"
                  class="meta-icon"
                  src="assets/reaction.svg"
                  height="20"
                  width="20"
                /><span id="blogReactions"></span>
              </div>
              •
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 3px;
                  margin-inline: 10px;
                "
              >
                <img
                  id="commentIcon"
                  class="meta-icon"
                  src="assets/chat-text.svg"
                  height="20"
                  width="20"
                /><span id="blogComments"></span>
              </div>
              •
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 3px;
                  margin-inline-start: 10px;
                "
              >
                <img
                  id="readTimeIcon"
                  class="meta-icon"
                  src="assets/alarm-clock.svg"
                  height="20"
                  width="20"
                /><span id="blogReadTime"></span>
              </div>
            </div>
          </div>
          <div id="blogTags" class="blog-tags"></div>
        </article>

        <div id="blogBody" class="blog-content"></div>

        <div class="blog-footer">
          <a id="devToLink" href="#" target="_blank" class="external-link">
            Read on Dev.to →
          </a>
        </div>
      </div>
    </div>

    <script>
      // Get correct icon path based on theme
      function getIconPath(iconName) {
        const isDarkMode =
          document.documentElement.classList.contains("dark-mode");
        const suffix = isDarkMode ? "-light" : "";
        return `assets/${iconName}${suffix}.svg`;
      }

      // Update all icons based on theme
      function updateAllIcons(isDarkMode) {
        // Navigation icons
        const homeIcon = document.getElementById("homeIcon");
        const hamburgerIcon = document.getElementById("hamburgerImage");
        const closeIcon = document.getElementById("closeImage");
        const curvedLineIcon = document.getElementById("curvedLineImage");

        if (homeIcon) {
          homeIcon.src = isDarkMode
            ? "assets/favicon-light.svg"
            : "assets/favicon.svg";
        }
        if (hamburgerIcon) {
          hamburgerIcon.src = isDarkMode
            ? "assets/hamburger-light.svg"
            : "assets/hamburger.svg";
        }
        if (closeIcon) {
          closeIcon.src = isDarkMode
            ? "assets/cross-light.svg"
            : "assets/cross.svg";
        }
        if (curvedLineIcon) {
          curvedLineIcon.src = isDarkMode
            ? "assets/curved-underline-light.svg"
            : "assets/curved-underline.svg";
        }

        // Blog meta icons
        const reactionIcon = document.getElementById("reactionIcon");
        const commentIcon = document.getElementById("commentIcon");
        const readTimeIcon = document.getElementById("readTimeIcon");

        if (reactionIcon) {
          reactionIcon.src = getIconPath("reaction");
        }
        if (commentIcon) {
          commentIcon.src = getIconPath("chat-text");
        }
        if (readTimeIcon) {
          readTimeIcon.src = getIconPath("alarm-clock");
        }
      }

      function toggleTheme() {
        const html = document.documentElement;
        const themeButton = document.querySelector(".theme-toggle");
        const mobileThemeButton = document.querySelector(
          ".mobile-theme-toggle"
        );

        html.classList.toggle("dark-mode");

        if (html.classList.contains("dark-mode")) {
          themeButton.textContent = "light mode (blinding!!)";
          mobileThemeButton.textContent = "light mode (blinding!!)";
          localStorage.setItem("theme", "dark");
        } else {
          themeButton.textContent = "dark mode (why not?)";
          mobileThemeButton.textContent = "dark mode (why not?)";
          localStorage.setItem("theme", "light");
        }

        const isDarkMode = html.classList.contains("dark-mode");
        updateAllIcons(isDarkMode);
      }

      // Mobile Navigation Toggle
      function toggleMobileNav() {
        const mobileNav = document.getElementById("mobileNav");
        mobileNav.classList.toggle("active");
      }

      // Close mobile nav when clicking on overlay
      document
        .getElementById("mobileNav")
        .addEventListener("click", function (e) {
          if (e.target === this) {
            toggleMobileNav();
          }
        });

      // Get blog ID from URL
      function getBlogIdFromUrl() {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get("id");
      }

      // Format date function
      function formatDate(dateString) {
        const date = new Date(dateString);
        const options = {
          year: "numeric",
          month: "long",
          day: "numeric",
        };
        return date.toLocaleDateString("en-US", options);
      }

      // Render blog content
      function renderBlog(article) {
        document.title = `${article.title} - Nabil Patel`;

        // Cover image
        const coverImg = document.getElementById("blogCover");
        if (article.cover_image || article.social_image) {
          coverImg.src = article.cover_image || article.social_image;
          coverImg.style.display = "block";
        } else {
          coverImg.style.display = "none";
        }

        // Title
        document.getElementById("blogTitle").textContent = article.title;

        // Author
        document.getElementById("authorAvatar").src =
          article.user.profile_image_90;
        document.getElementById("authorName").textContent = article.user.name;

        // Meta information
        document.getElementById("blogDate").textContent = formatDate(
          article.published_timestamp
        );
        document.getElementById(
          "blogReactions"
        ).textContent = ` ${article.public_reactions_count}`;
        document.getElementById(
          "blogComments"
        ).textContent = ` ${article.comments_count}`;
        document.getElementById(
          "blogReadTime"
        ).textContent = ` ${article.reading_time_minutes} min read`;

        // Tags
        const tagsContainer = document.getElementById("blogTags");
        if (article.tags && article.tags.length > 0) {
          tagsContainer.innerHTML = article.tags
            .map((tag) => `<span class="tag">${tag}</span>`)
            .join("");
        }

        // Content
        document.getElementById("blogBody").innerHTML = article.body_html;

        // External link
        document.getElementById("devToLink").href = article.url;

        // Update icons based on current theme after content is loaded
        const isDarkMode =
          document.documentElement.classList.contains("dark-mode");
        updateAllIcons(isDarkMode);

        // Show content
        document.getElementById("blogContent").style.display = "block";
      }

      // Fetch and display individual blog
      async function fetchBlog() {
        const blogId = getBlogIdFromUrl();

        if (!blogId) {
          document.getElementById("loading").style.display = "none";
          document.getElementById("error").textContent = "No blog ID provided.";
          document.getElementById("error").style.display = "block";
          return;
        }

        const loadingEl = document.getElementById("loading");
        const errorEl = document.getElementById("error");

        try {
          const response = await fetch(`https://dev.to/api/articles/${blogId}`);

          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }

          const article = await response.json();

          loadingEl.style.display = "none";
          renderBlog(article);
        } catch (error) {
          console.error("Error fetching blog:", error);
          loadingEl.style.display = "none";
          errorEl.textContent =
            "Failed to load blog post. Please try again later.";
          errorEl.style.display = "block";
        }
      }

      // Initialize page
      document.addEventListener("DOMContentLoaded", function () {
        // Apply saved theme
        const savedTheme = localStorage.getItem("theme");
        const html = document.documentElement;
        const themeButton = document.querySelector(".theme-toggle");
        const mobileThemeButton = document.querySelector(
          ".mobile-theme-toggle"
        );

        if (savedTheme === "dark") {
          html.classList.add("dark-mode");
          themeButton.textContent = "light mode (blinding!!)";
          mobileThemeButton.textContent = "light mode (blinding!!)";
          updateAllIcons(true);
        } else {
          html.classList.remove("dark-mode");
          themeButton.textContent = "dark mode (why not?)";
          mobileThemeButton.textContent = "dark mode (why not?)";
          updateAllIcons(false);
        }

        // Fetch blog
        fetchBlog();
      });
    </script>
  </body>
</html>
