<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nabil Patel - Blogs</title>
    <link rel="icon" href="assets/favicon.svg" type="image/svg+xml" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/highlightjs-themes@1.0.0/vs.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poor+Story&display=swap"
      rel="stylesheet"
    />
    <style>
      html {
        cursor: url("assets/pointer.svg"), auto;
        font-family: "Poor Story", system-ui;
        scroll-behavior: smooth;
        transition: filter 0.3s ease;
      }

      html.dark-mode {
        filter: invert(1) hue-rotate(180deg);
        cursor: url("assets/pointer-light.svg"), auto;
      }

      html.dark-mode img {
        filter: invert(1) hue-rotate(180deg);
      }

      html.dark-mode .home-section img,
      html.dark-mode nav a,
      html.dark-mode .theme-toggle,
      html.dark-mode .hamburger-menu img,
      html.dark-mode .mobile-theme-toggle,
      html.dark-mode .mobile-nav a,
      html.dark-mode .mobile-nav-close,
      html.dark-mode .back-btn,
      html.dark-mode img {
        cursor: url("assets/cursor-light.svg"), auto;
      }

      ::selection {
        background-color: #000000;
        color: #ffffff;
      }

      body {
        scrollbar-width: none;
        -ms-overflow-style: none;
        margin: 0;
        padding: 0;
        background-color: #fefefe;
        min-height: 100vh;
      }

      ::-webkit-scrollbar {
        display: none;
      }

      nav {
        z-index: 1000;
        margin: 15px 10px;
        position: sticky;
        top: 15px;
        border: 4px solid black;
        border-top-left-radius: 37px 140px;
        border-top-right-radius: 23px 130px;
        border-bottom-left-radius: 20px 109px;
        border-bottom-right-radius: 100px 44px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        padding: 0px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: #fefefe;
      }

      .nav-left {
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .nav-center {
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .home-section {
        display: flex;
        justify-content: start;
        align-items: center;
      }

      .home-section img {
        cursor: url("assets/cursor.svg"), auto;
      }

      nav a {
        cursor: url("assets/cursor.svg"), auto;
        display: flex;
        align-items: center;
        text-decoration: none;
        color: black;
        font-size: 1.2em;
        font-weight: bold;
        padding: 10px;
        transition: color 0.3s ease;
        white-space: nowrap;
      }

      nav a:hover {
        color: #666;
      }

      .theme-toggle {
        margin-right: 10px;
        cursor: url("assets/cursor.svg"), auto;
        background: none;
        border: 2px solid black;
        border-radius: 87% 13% 81% 19% / 10% 72% 28% 90%;
        padding: 8px 12px;
        font-family: "Poor Story", system-ui;
        font-size: 1em;
        font-weight: bold;
        color: black;
        transition: all 0.3s ease;
        white-space: nowrap;
      }

      .theme-toggle:hover {
        background-color: #f0f0f0;
        transform: scale(1.05);
      }

      .hamburger-menu {
        z-index: 1000;
        margin: 0 10px;
        position: sticky;
        top: 0;
        height: 40px;
        display: none;
        width: calc(100% - 20px);
        padding: 10px;
        background-color: #fefefe;
        box-sizing: border-box;
        justify-content: space-between;
        align-items: center;
      }

      .hamburger-menu img {
        cursor: url("assets/cursor.svg"), auto;
        width: 30px;
        height: 30px;
      }

      .mobile-theme-toggle {
        cursor: url("assets/cursor.svg"), auto;
        background: none;
        border: 2px solid black;
        border-radius: 87% 13% 81% 19% / 10% 72% 28% 90%;
        padding: 6px 10px;
        font-family: "Poor Story", system-ui;
        font-size: 0.9em;
        font-weight: bold;
        color: black;
        transition: all 0.3s ease;
      }

      .mobile-nav {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 0.99);
        z-index: 2000;
        justify-content: center;
        align-items: center;
      }

      .mobile-nav.active {
        display: flex;
      }

      .mobile-nav-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 30px;
      }

      .mobile-nav a {
        color: rgb(0, 0, 0);
        text-decoration: none;
        font-size: 1.5em;
        font-weight: bold;
        cursor: url("assets/cursor.svg"), auto;
        padding: 10px 20px;
        border: 3px solid black;
        border-radius: 87% 13% 81% 19% / 10% 72% 28% 90%;
        transition: all 0.3s ease;
      }

      .mobile-nav a:hover {
        background-color: white;
        color: black;
      }

      .mobile-nav-close {
        position: absolute;
        top: 20px;
        right: 20px;
        color: white;
        font-size: 2em;
        cursor: url("assets/cursor.svg"), auto;
        background: none;
        border: none;
        padding: 10px;
      }

      .main-content {
        padding: 20px 20px;
        max-width: 1200px;
        margin: 0 auto;
      }

      .page-title {
        font-size: 3em;
        text-align: center;
        margin-bottom: 20px;
        color: #333;
      }

      .page-description {
        font-size: 1.5em;
        text-align: center;
        margin-bottom: 50px;
        color: #666;
      }

      .back-btn {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 12px 24px;
        border: 4px solid black;
        background: transparent;
        color: black;
        text-decoration: none;
        font-size: 16px;
        font-weight: bold;
        cursor: url("assets/cursor.svg"), auto;
        transition: all 0.3s ease;
        border-radius: 87% 13% 81% 19% / 10% 72% 28% 90%;
        margin-bottom: 40px;
        font-family: "Poor Story", system-ui;
      }

      .back-btn:hover {
        background: #f0f0f0;
        transform: scale(1.05);
      }

      .blogs-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        gap: 30px;
        margin-top: 40px;
      }

      .blog-card {
        border: 4px solid black;
        border-top-left-radius: 25px 100px;
        border-top-right-radius: 18px 90px;
        border-bottom-left-radius: 12px 45px;
        border-bottom-right-radius: 70px 25px;
        padding: 25px;
        background-color: #fefefe;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease, opacity 0.6s ease;
        opacity: 0;
        transform: translateY(20px);
        cursor: url("assets/cursor.svg"), auto;
        text-decoration: none;
        color: inherit;
        display: block;
      }

      .blog-card.loaded {
        opacity: 1;
        transform: translateY(0);
      }

      .blog-card:hover {
        transform: translateY(-5px);
      }

      .blog-cover {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 15px;
        margin-bottom: 20px;
        border: 2px solid #ddd;
      }

      .blog-title {
        font-size: 1.4em;
        font-weight: bold;
        color: #333;
        margin-bottom: 10px;
        line-height: 1.3;
      }

      .blog-description {
        font-size: 1.2em;
        line-height: 1.5;
        color: #555;
        margin-bottom: 15px;
      }

      .blog-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        font-size: 0.9em;
        color: #666;
      }

      .blog-date {
        font-weight: bold;
      }

      .blog-stats {
        display: flex;
        gap: 15px;
      }

      .blog-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 15px;
      }

      .tag {
        background-color: #333;
        color: white;
        padding: 4px 8px;
        border: 2px solid white;
        border-radius: 87% 13% 100% 0% / 21% 72% 28% 79%;
        font-size: 0.8em;
      }

      .loading {
        text-align: center;
        font-size: 1.5em;
        color: #666;
        margin: 50px 0;
      }

      .error {
        text-align: center;
        font-size: 1.3em;
        color: #d32f2f;
        margin: 50px 0;
        padding: 20px;
        border: 3px solid #d32f2f;
        border-radius: 87% 13% 81% 19% / 10% 72% 28% 90%;
        background-color: #ffebee;
      }

      .no-blogs {
        text-align: center;
        font-size: 1.5em;
        color: #666;
        margin: 50px 0;
        padding: 40px;
        border: 4px solid #ddd;
        border-radius: 87% 13% 81% 19% / 10% 72% 28% 90%;
      }

      img {
        cursor: url("assets/cursor.svg"), auto;
      }

      @media (max-width: 1100px) {
        .nav-center {
          gap: 10px;
        }
        nav a {
          font-size: 1em;
          padding: 8px;
        }
        .theme-toggle {
          margin-right: 10px;
          font-size: 0.9em;
          padding: 6px 10px;
        }
      }

      @media (max-width: 880px) {
        .blogs-grid {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 550px) {
        nav {
          display: none;
        }
        .hamburger-menu {
          display: flex;
        }
        .page-title {
          font-size: 2em;
        }
        .page-description {
          font-size: 1.2em;
        }
        .blogs-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <nav>
      <div class="nav-left">
        <div class="home-section">
          <a href="index.html">
            <img id="homeIcon" src="assets/favicon.svg" alt="home" />
          </a>
        </div>
      </div>
      <div class="nav-center">
        <a href="index.html#home">Home</a>
        <a href="index.html#about">About</a>
        <a href="index.html#experience">Experience</a>
        <a href="index.html#projects">Projects</a>
        <a href="index.html#skills">Skills</a>
        <a href="index.html#education">Education</a>
        <div
          style="
            display: flex;
            flex-direction: column;
            justify-content: center;
            margin-bottom: -10px !important;
          "
        >
          <a
            style="display: flex; padding-bottom: 0 !important; color: #666"
            href="blogs.html"
            >Blogs</a
          >
          <div style="display: flex; justify-content: center; align-items: top">
            <img
              id="curvedLineImage"
              src="assets/curved-underline.svg"
              height="20"
              width="40"
            />
          </div>
        </div>
        <a href="index.html#contact">Contact</a>
      </div>
      <button class="theme-toggle" onclick="toggleTheme()">
        dark mode (why not?)
      </button>
    </nav>

    <div class="hamburger-menu">
      <button class="mobile-theme-toggle" onclick="toggleTheme()">
        dark mode (why not?)
      </button>
      <img
        id="hamburgerImage"
        src="assets/hamburger.svg"
        alt="menu"
        onclick="toggleMobileNav()"
      />
    </div>

    <!-- Mobile Navigation Overlay -->
    <div class="mobile-nav" id="mobileNav">
      <button class="mobile-nav-close" onclick="toggleMobileNav()">
        <img id="closeImage" src="assets/cross.svg" alt="close" />
      </button>
      <div class="mobile-nav-content">
        <a href="index.html#home" onclick="toggleMobileNav()">Home</a>
        <a href="index.html#about" onclick="toggleMobileNav()">About</a>
        <a href="index.html#experience" onclick="toggleMobileNav()"
          >Experience</a
        >
        <a href="index.html#projects" onclick="toggleMobileNav()">Projects</a>
        <a href="index.html#skills" onclick="toggleMobileNav()">Skills</a>
        <a href="index.html#education" onclick="toggleMobileNav()">Education</a>
        <a href="blogs.html" onclick="toggleMobileNav()">Blogs</a>
        <a href="index.html#contact" onclick="toggleMobileNav()">Contact</a>
      </div>
    </div>

    <div class="main-content">
      <h1 class="page-title">Brain Dump</h1>
      <p class="page-description">
        Thoughts, insights, and tutorials from my journey in tech
      </p>

      <div id="loading" class="loading">Loading blogs...</div>
      <div id="error" class="error" style="display: none"></div>
      <div id="noblogs" class="no-blogs" style="display: none">
        No blogs found. Check back later for new content!
      </div>

      <div id="blogsContainer" class="blogs-grid"></div>
    </div>

    <script>
      function toggleTheme() {
        const html = document.documentElement;
        const themeButton = document.querySelector(".theme-toggle");
        const mobileThemeButton = document.querySelector(
          ".mobile-theme-toggle"
        );

        html.classList.toggle("dark-mode");

        if (html.classList.contains("dark-mode")) {
          themeButton.textContent = "light mode (blinding!!)";
          mobileThemeButton.textContent = "light mode (blinding!!)";
          localStorage.setItem("theme", "dark");
        } else {
          themeButton.textContent = "dark mode (why not?)";
          mobileThemeButton.textContent = "dark mode (why not?)";
          localStorage.setItem("theme", "light");
        }

        const isDarkMode = html.classList.contains("dark-mode");
        updateAllIcons(isDarkMode);
      }

      // Mobile Navigation Toggle
      function toggleMobileNav() {
        const mobileNav = document.getElementById("mobileNav");
        mobileNav.classList.toggle("active");
      }

      // Close mobile nav when clicking on overlay
      document
        .getElementById("mobileNav")
        .addEventListener("click", function (e) {
          if (e.target === this) {
            toggleMobileNav();
          }
        });

      // Format date function
      function formatDate(dateString) {
        const date = new Date(dateString);
        const options = {
          year: "numeric",
          month: "short",
          day: "numeric",
        };
        return date.toLocaleDateString("en-US", options);
      }

      // Get correct icon path based on theme
      function getIconPath(iconName) {
        const isDarkMode =
          document.documentElement.classList.contains("dark-mode");
        const suffix = isDarkMode ? "-light" : "";
        return `assets/${iconName}${suffix}.svg`;
      }

      // Create blog card HTML
      function createBlogCard(article) {
        const coverImage =
          article.cover_image ||
          article.social_image ||
          "https://via.placeholder.com/400x200?text=No+Image";
        const description = article.description || "No description available.";
        const tags = article.tag_list || [];

        return `
          <a target="_blank" class="blog-card" onclick="viewBlog(${
            article.id
          })">
            <img src="${coverImage}" alt="${
          article.title
        }" class="blog-cover" />
            <h3 class="blog-title">${article.title}</h3>
            <p class="blog-description">${description}</p>
            <div class="blog-meta">
              <span class="blog-date">${formatDate(
                article.published_timestamp
              )}</span>
              <div class="blog-stats">
                <span style="font-size: 20px; display: flex; align-items: center; gap: 5px">
                  <img class="reaction-icon" src="${getIconPath(
                    "reaction"
                  )}" height="20" width="20"/> 
                  ${article.public_reactions_count}
                </span>
                <span style="font-size: 20px; display: flex; align-items: center; gap: 5px">
                  <img class="comment-icon" src="${getIconPath(
                    "chat-text"
                  )}" height="20" width="20"/> 
                  ${article.comments_count}
                </span>
                <span style="font-size: 20px; display: flex; align-items: center; gap: 5px">
                  <img class="readtime-icon" src="${getIconPath(
                    "alarm-clock"
                  )}" height="20" width="20"/> 
                  ${article.reading_time_minutes} min read
                </span>
              </div>
            </div>
            <div class="blog-tags">
              ${tags.map((tag) => `<span class="tag">${tag}</span>`).join("")}
            </div>
          </a>
        `;
      }

      function viewBlog(blogId) {
        window.location.href = `view-blog.html?id=${blogId}`;
      }

      // Update all icons based on theme
      function updateAllIcons(isDarkMode) {
        // Navigation icons
        const homeIcon = document.getElementById("homeIcon");
        const hamburgerIcon = document.getElementById("hamburgerImage");
        const closeIcon = document.getElementById("closeImage");
        const curvedLineIcon = document.getElementById("curvedLineImage");

        if (homeIcon) {
          homeIcon.src = isDarkMode
            ? "assets/favicon-light.svg"
            : "assets/favicon.svg";
        }
        if (hamburgerIcon) {
          hamburgerIcon.src = isDarkMode
            ? "assets/hamburger-light.svg"
            : "assets/hamburger.svg";
        }
        if (closeIcon) {
          closeIcon.src = isDarkMode
            ? "assets/cross-light.svg"
            : "assets/cross.svg";
        }
        if (curvedLineIcon) {
          curvedLineIcon.src = isDarkMode
            ? "assets/curved-underline-light.svg"
            : "assets/curved-underline.svg";
        }

        // Blog card icons (dynamically created)
        const reactionIcons = document.querySelectorAll(".reaction-icon");
        const commentIcons = document.querySelectorAll(".comment-icon");
        const readtimeIcons = document.querySelectorAll(".readtime-icon");

        reactionIcons.forEach((icon) => {
          icon.src = getIconPath("reaction");
        });

        commentIcons.forEach((icon) => {
          icon.src = getIconPath("chat-text");
        });

        readtimeIcons.forEach((icon) => {
          icon.src = getIconPath("alarm-clock");
        });
      }

      // Fetch and display blogs
      async function fetchBlogs() {
        const loadingEl = document.getElementById("loading");
        const errorEl = document.getElementById("error");
        const noBlogsEl = document.getElementById("noblogs");
        const containerEl = document.getElementById("blogsContainer");

        try {
          const response = await fetch(
            "https://dev.to/api/articles?username=nabilpatel4012"
          );

          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }

          const articles = await response.json();

          loadingEl.style.display = "none";

          if (!articles || articles.length === 0) {
            noBlogsEl.style.display = "block";
            return;
          }

          // Create blog cards
          const blogCards = articles
            .map((article) => createBlogCard(article))
            .join("");
          containerEl.innerHTML = blogCards;

          // Update icons after cards are created
          const isDarkMode =
            document.documentElement.classList.contains("dark-mode");
          updateAllIcons(isDarkMode);

          // Animate cards on load
          setTimeout(() => {
            const cards = document.querySelectorAll(".blog-card");
            cards.forEach((card, index) => {
              setTimeout(() => {
                card.classList.add("loaded");
              }, index * 100);
            });
          }, 100);
        } catch (error) {
          console.error("Error fetching blogs:", error);
          loadingEl.style.display = "none";
          errorEl.textContent = "Failed to load blogs. Please try again later.";
          errorEl.style.display = "block";
        }
      }

      // Initialize page
      document.addEventListener("DOMContentLoaded", function () {
        // Apply saved theme
        const savedTheme = localStorage.getItem("theme");
        const html = document.documentElement;
        const themeButton = document.querySelector(".theme-toggle");
        const mobileThemeButton = document.querySelector(
          ".mobile-theme-toggle"
        );

        if (savedTheme === "dark") {
          html.classList.add("dark-mode");
          themeButton.textContent = "light mode (blinding!!)";
          mobileThemeButton.textContent = "light mode (blinding!!)";
          updateAllIcons(true);
        } else {
          html.classList.remove("dark-mode");
          themeButton.textContent = "dark mode (why not?)";
          mobileThemeButton.textContent = "dark mode (why not?)";
          updateAllIcons(false);
        }

        // Fetch blogs
        fetchBlogs();
      });
    </script>
  </body>
</html>
